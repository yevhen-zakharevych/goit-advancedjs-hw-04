{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(options) {\n  const params = {\n    key: '7794456-14148324ae4ced2c6e82d12c0',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    ...options,\n  };\n\n  const response = await axios.get('https://pixabay.com/api/', {\n    method: 'GET',\n    params,\n  });\n\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport * as api from './api';\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('#load-more');\nconst per_page = 40;\nlet page = 1;\n\nsearchForm.addEventListener('submit', onSearch);\n\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  const searchQuery = e.currentTarget.elements.searchQuery.value.trim();\n\n  page = 1;\n  galleryContainer.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Enter search query',\n    });\n\n    return;\n  }\n\n  fetchAndRenderImages({\n    searchQuery,\n    page: 1,\n    per_page,\n  });\n}\n\nfunction onLoadMore() {\n  page += 1;\n  loadMoreBtn.style.display = 'none';\n\n  fetchAndRenderImages(\n    {\n      searchQuery: searchForm.elements.searchQuery.value.trim(),\n      page,\n      per_page,\n    },\n    true\n  );\n}\n\nasync function fetchAndRenderImages(options, isLoadMore = false) {\n  const { searchQuery: q, page, per_page } = options;\n\n  try {\n    const data = await api.fetchImages({ q, page, per_page });\n\n    if (data.total === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n      });\n\n      return;\n    }\n\n    if (!isLoadMore) {\n      iziToast.success({\n        title: 'Success',\n        message: `Hooray! We found ${data.totalHits} images.`,\n      });\n    }\n\n    if (data.totalHits > page * per_page) {\n      loadMoreBtn.style.display = 'flex';\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    const images = data.hits\n      .map(image => {\n        return composeImage(image);\n      })\n      .join('');\n\n    if (isLoadMore) {\n      galleryContainer.insertAdjacentHTML('beforeend', images);\n\n      return;\n    }\n\n    galleryContainer.innerHTML = images;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n  }\n}\n\nfunction composeImage(image) {\n  return `\n    <div class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>\n          <span>${image.likes}</span>\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>\n          <span>${image.views}</span>\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>\n          <span>${image.comments}</span>\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>\n          <span>${image.downloads}</span>\n        </p>\n      </div>\n    </div>`;\n}\n"],"names":["fetchImages","options","params","axios","searchForm","galleryContainer","loadMoreBtn","per_page","page","onSearch","onLoadMore","e","searchQuery","iziToast","fetchAndRenderImages","isLoadMore","q","data","api.fetchImages","images","image","composeImage","error"],"mappings":"6vBAEO,eAAeA,EAAYC,EAAS,CACzC,MAAMC,EAAS,CACb,IAAK,oCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,GAAGD,CACP,EAOE,OALiB,MAAME,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,MACR,OAAAD,CACJ,CAAG,GAEe,IAClB,CCZA,MAAME,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAW,GACjB,IAAIC,EAAO,EAEXJ,EAAW,iBAAiB,SAAUK,CAAQ,EAE9CH,EAAY,iBAAiB,QAASI,CAAU,EAEhD,SAASD,EAASE,EAAG,CACnBA,EAAE,eAAc,EAEhB,MAAMC,EAAcD,EAAE,cAAc,SAAS,YAAY,MAAM,OAM/D,GAJAH,EAAO,EACPH,EAAiB,UAAY,GAC7BC,EAAY,MAAM,QAAU,OAExB,CAACM,EAAa,CAChBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oBACf,CAAK,EAED,MACD,CAEDC,EAAqB,CACnB,YAAAF,EACA,KAAM,EACN,SAAAL,CACJ,CAAG,CACH,CAEA,SAASG,GAAa,CACpBF,GAAQ,EACRF,EAAY,MAAM,QAAU,OAE5BQ,EACE,CACE,YAAaV,EAAW,SAAS,YAAY,MAAM,KAAM,EACzD,KAAAI,EACA,SAAAD,CACD,EACD,EACJ,CACA,CAEA,eAAeO,EAAqBb,EAASc,EAAa,GAAO,CAC/D,KAAM,CAAE,YAAaC,EAAG,KAAAR,EAAM,SAAAD,CAAQ,EAAKN,EAE3C,GAAI,CACF,MAAMgB,EAAO,MAAMC,EAAgB,CAAE,EAAAF,EAAG,KAAAR,EAAM,SAAAD,CAAQ,CAAE,EAExD,GAAIU,EAAK,QAAU,EAAG,CACpBJ,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,EAED,MACD,CAEIE,GACHF,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oBAAoBI,EAAK,SAAS,UACnD,CAAO,EAGCA,EAAK,UAAYT,EAAOD,EAC1BD,EAAY,MAAM,QAAU,OAE5BO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4DACjB,CAAO,EAGH,MAAMM,EAASF,EAAK,KACjB,IAAIG,GACIC,EAAaD,CAAK,CAC1B,EACA,KAAK,EAAE,EAEV,GAAIL,EAAY,CACdV,EAAiB,mBAAmB,YAAac,CAAM,EAEvD,MACD,CAEDd,EAAiB,UAAYc,CAC9B,OAAQG,EAAO,CACdT,EAAS,MAAM,CACb,MAAO,QACP,QAASS,EAAM,OACrB,CAAK,CACF,CACH,CAEA,SAASD,EAAaD,EAAO,CAC3B,MAAO;AAAA;AAAA,kBAESA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,kBAItCA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,kBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,WAIjC"}